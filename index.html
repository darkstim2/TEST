<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>NeoLab [BLUE] v2</title>
  <meta name="theme-color" content="#04122a"/>
  <style>
    :root{
      --bg-0:#020714; --bg-1:#071634; --panel:rgba(9,22,52,.58);
      --txt:#eaf3ff; --txt-weak:#b9d1ff;
      --primary:#3aa8ff; --accent:#9de5ff; --good:#2df7c0; --danger:#ff3b6b;
      --border:#1e5bcb; --glow:0 0 14px rgba(58,168,255,.55), inset 0 0 32px rgba(58,168,255,.12);
      --radius:16px; --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      --sans: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{ margin:0; color:var(--txt); font:15px/1.45 var(--sans);
      background:
        radial-gradient(1200px 700px at 70% -10%, #0a2a55 0%, transparent 60%),
        radial-gradient(800px 500px at -10% 90%, #001a40 0%, transparent 60%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1));
      background-attachment: fixed; overflow:hidden;
    }
    .bg-grid::before{ content:""; position:fixed; inset:0; z-index:-1;
      background:
        linear-gradient(transparent 31px, rgba(30,91,203,.35) 32px),
        linear-gradient(90deg, transparent 31px, rgba(30,91,203,.35) 32px);
      background-size:32px 32px; animation:gridmove 20s linear infinite; opacity:.35;
      mask-image: radial-gradient(1200px 720px at 60% 30%, rgba(255,255,255,.7), rgba(255,255,255,.05) 70%, transparent 80%);
    }
    @keyframes gridmove{ from{transform:translateY(0)} to{transform:translateY(32px)} }
    .fx::before{ content:""; position:fixed; inset:0; pointer-events:none; z-index:2;
      background: radial-gradient(circle at 50% 50%, transparent 60%, rgba(0,0,0,.35) 90%),
                 repeating-linear-gradient(to bottom, rgba(255,255,255,.03), rgba(255,255,255,.03) 2px, transparent 2px, transparent 4px);
      mix-blend-mode:overlay;
    }
    .app{ position:relative; height:100dvh; display:grid; grid-template-rows:auto 1fr auto; }
    header{ height:60px; padding:10px 16px; display:flex; align-items:center; gap:12px;
      background:linear-gradient(180deg, rgba(9,22,52,.95), rgba(6,16,36,.85));
      border-bottom:1px solid var(--border); box-shadow:var(--glow); position:sticky; top:0; z-index:5;
    }
    .dot{ width:10px; height:10px; border-radius:50%; background:var(--good); box-shadow:0 0 14px var(--good) }
    header h1{ margin:0; font-size:16px; letter-spacing:.4px } .sub{ color:var(--txt-weak); font:600 12px var(--mono) }
    main{ position:relative; overflow:auto; padding:14px; scroll-behavior:smooth; }
    .panel{ position:relative; background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:14px;
      box-shadow:var(--glow); backdrop-filter: blur(12px) saturate(140%); margin-bottom:12px; }
    .panel:after,.panel:before{ content:""; position:absolute; width:18px; height:18px; border:2px solid var(--accent);
      filter:drop-shadow(0 0 8px rgba(157,229,255,.5)); }
    .panel:before{ left:-2px; top:-2px; border-right:none; border-bottom:none; }
    .panel:after{ right:-2px; bottom:-2px; border-left:none; border-top:none; }
    h2{ margin:0 0 8px 0; font-size:16px; letter-spacing:.3px } .muted{ color:var(--txt-weak) }
    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
    .kpi{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-radius:12px;
      border:1px dashed var(--border); background:rgba(12,30,72,.55); font:700 13px var(--mono); box-shadow: inset 0 0 18px rgba(58,168,255,.12); }
    .kpi strong{ font:800 16px var(--mono) }
    /* buttons: force white */
    .btn, .nav-btn{ color:#fff !important; text-shadow:0 0 6px rgba(255,255,255,.22) }
    .btn{ display:flex; align-items:center; justify-content:center; gap:8px; width:100%; padding:13px 14px;
      border-radius:14px; border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(58,168,255,.25), rgba(58,168,255,.12));
      box-shadow:var(--glow); font-weight:800; letter-spacing:.25px; position:relative; overflow:hidden;
      transition: transform .05s ease, filter .2s ease; }
    .btn:after{ content:""; position:absolute; inset:-150% -20%; transform:skewX(-20deg);
      background:linear-gradient(90deg, transparent, rgba(255,255,255,.15), transparent);
      animation:sheen 4s linear infinite; pointer-events:none; }
    .btn:active{ transform:scale(.98) } @keyframes sheen{ from{ transform:translateX(-60%) skewX(-20deg)} to{ transform:translateX(60%) skewX(-20deg)}}
    .btn--ghost{ background:linear-gradient(180deg, rgba(12,28,70,.55), rgba(8,20,54,.5)) }
    .btn--good{ background:linear-gradient(180deg, rgba(45,247,192,.35), rgba(45,247,192,.15)); border-color:#1b7d63 }
    .item{ display:flex; gap:10px; align-items:center; padding:10px; border:1px solid var(--border); border-radius:12px; background:rgba(14,32,78,.55);
      box-shadow: inset 0 0 18px rgba(58,168,255,.08); }
    .item .meta{ font:700 12px var(--mono); color:var(--txt-weak) } .price{ font:800 13px var(--mono); color:#c4e2ff }
    .field{ display:grid; gap:6px } .field label{ font:800 12px var(--mono); color:var(--txt-weak) }
    input[type=number],input[type=text],select{ width:100%; border-radius:12px; border:1px solid var(--border); padding:12px 12px;
      background:rgba(10,28,74,.6); color:#fff; font-weight:700; box-shadow:var(--glow); }
    .note{ font:700 12px var(--mono); color:var(--txt-weak) }
    nav{ padding:10px; display:grid; grid-template-columns:1fr 1fr; gap:10px;
      background:linear-gradient(180deg, rgba(6,16,36,.5), rgba(6,16,36,.92)); border-top:1px solid var(--border); box-shadow:var(--glow); }
    .nav-btn{ border-radius:14px; border:1px solid var(--border);
      background: radial-gradient(120px 40px at 50% 0%, rgba(58,168,255,.35), transparent 60%),
                  linear-gradient(180deg, rgba(18,46,110,.7), rgba(10,28,74,.7));
      padding:12px; font-weight:800; letter-spacing:.25px; display:flex; align-items:center; justify-content:center; gap:8px; text-align:center; }
    .nav-btn.active{ outline:2px solid var(--primary); box-shadow:0 0 0 4px rgba(58,168,255,.14) }
    .progress{ height:10px; border-radius:8px; background:rgba(255,255,255,.08); overflow:hidden; border:1px solid var(--border) }
    .progress>b{ display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--primary), var(--accent)); box-shadow:0 0 20px rgba(58,168,255,.6) inset }
    nav{ padding-bottom: calc(10px + env(safe-area-inset-bottom)); }
    header{ padding-top: calc(10px + env(safe-area-inset-top)); height: calc(60px + env(safe-area-inset-top)); }
  </style>
</head>
<body class="bg-grid fx">
  <canvas id="particles" style="position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.6;"></canvas>
  <div class="app" id="app">
    <header><div class="dot"></div><div><h1>NeoLab <span style="color:#9de5ff">[BLUE]</span> v2</h1>
      <div class="sub">–∫–∏–±–µ—Ä–Ω–µ—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–ø–ª–µ–∫—Å ¬∑ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º</div></div></header>
    <main id="view" tabindex="-1" aria-live="polite"></main>
    <nav id="nav">
      <button class="nav-btn" data-view="processor">‚öôÔ∏è –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä</button>
      <button class="nav-btn" data-view="mods">üß¨ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏</button>
      <button class="nav-btn" data-view="lab">‚ò¢Ô∏è –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</button>
      <button class="nav-btn" data-view="shop">‚ûï –ò–º–ø–ª–∞–Ω—Ç-–ë—É—Ç–∏–∫</button>
      <button class="nav-btn" data-view="format">‚ôªÔ∏è –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
      <button class="nav-btn" data-view="god">‚ú® –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ë–æ–≥—É</button>
    </nav>
  </div>
  <div class="toast" id="toast"></div>
  <script>
  /* particles background */
  const c=document.getElementById('particles'),x=c.getContext('2d');let W,H,P=[];
  function resize(){W=c.width=innerWidth;H=c.height=innerHeight;P=Array.from({length:36},()=>({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3}));}
  function tick(){x.clearRect(0,0,W,H);P.forEach(p=>{p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>W)p.vx*=-1;if(p.y<0||p.y>H)p.vy*=-1;});
    x.fillStyle='rgba(157,229,255,.7)';for(const p of P){x.beginPath();x.arc(p.x,p.y,1.2,0,Math.PI*2);x.fill();}
    for(let i=0;i<P.length;i++)for(let j=i+1;j<P.length;j++){const a=P[i],b=P[j],dx=a.x-b.x,dy=a.y-b.y,d=Math.hypot(dx,dy);
      if(d<110){x.strokeStyle=`rgba(58,168,255,${.15*(1-d/110)})`;x.lineWidth=.6;x.beginPath();x.moveTo(a.x,a.y);x.lineTo(b.x,b.y);x.stroke();}}requestAnimationFrame(tick);}
  resize();addEventListener('resize',resize);tick();
  /* simple app state */
  const $=(s,e=document)=>e.querySelector(s),$$=(s,e=document)=>Array.from(e.querySelectorAll(s));
  const blank={cryo:0,components:0,blueprints:0,modsBuilt:0,level:1,inventory:[],modules:{calibrated:false,frequency:0,installed:[]},log:[]};
  let S=load();function save(){localStorage.setItem('neolab-blue',JSON.stringify(S));}
  function load(){try{return Object.assign({},blank,JSON.parse(localStorage.getItem('neolab-blue')||'{}'));}catch(e){return structuredClone(blank);}}
  function toast(m){const t=$('#toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),1600);}
  const routes={processor,lab,mods,shop,format,god,welcome};const view=$('#view');
  function go(n){const fn=routes[n]||routes.welcome;view.innerHTML=fn();attach(n);$$('.nav-btn').forEach(b=>b.classList.toggle('active',b.dataset.view===n));save();view.scrollTop=0;}
  function welcome(){return `<section class="panel"><h2>‚ò∏ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2><p class="muted">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∏–∂–Ω–∏–µ –∫–Ω–æ–ø–∫–∏.</p>
  <div class="grid-2"><button class="btn" data-go="processor">üîé –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä</button><button class="btn btn--ghost" data-go="lab">üß™ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</button></div></section>`;}
  function processor(){return `<section class="panel"><h2>‚öôÔ∏è –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä</h2><div class="grid-2"><div class="kpi">–ö—Ä–∏–æ-–ì–µ–Ω–æ–º <strong>${S.cryo}</strong></div>
  <div class="kpi">–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã <strong>${S.components}</strong></div><div class="kpi">–ß–µ—Ä—Ç–µ–∂–∏ <strong>${S.blueprints}</strong></div>
  <div class="kpi">–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π <strong>${S.modsBuilt}</strong></div><div class="kpi">–£—Ä–æ–≤–µ–Ω—å <strong>${S.level}</strong></div>
  <div class="kpi">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å <strong>${S.inventory.length}</strong></div></div></section>`;}
  function lab(){return `<section class="panel"><h2>‚ò¢Ô∏è –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</h2><div class="field"><label>–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ</label><div class="progress"><b id="pbar"></b></div></div>
  <button class="btn" id="extract">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å</button></section>`;}
  function mods(){return `<section class="panel"><h2>üß¨ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏</h2><button class="btn" id="calibrate">‚öôÔ∏è –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞</button></section>`;}
  function shop(){return `<section class="panel"><h2>‚ûï –ò–º–ø–ª–∞–Ω—Ç-–ë—É—Ç–∏–∫</h2><p class="muted">–ë–∞–ª–∞–Ω—Å: ${S.cryo} ‚ìÄ</p></section>`;}
  function format(){return `<section class="panel"><h2>‚ôªÔ∏è –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2><p class="muted">–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</p></section>`;}
  function god(){return `<section class="panel"><h2>‚ú® –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ë–æ–≥—É</h2><div class="note">/start, /help</div></section>`;}
  function attach(n){if(n==='lab'){ $('#extract').onclick=()=>{const p=$('#pbar');p.style.width='0%';let w=0;const t=setInterval(()=>{w+=20;p.style.width=Math.min(w,100)+'%';if(w>=100){clearInterval(t);S.cryo++;toast('+1 ‚ìÄ');go('lab');}},200);};}}
  go('welcome');$$('.nav-btn').forEach(b=>b.addEventListener('click',()=>go(b.dataset.view)));
  </script>
</body>
</html>
